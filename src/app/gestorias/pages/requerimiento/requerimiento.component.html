<div class="row m-4">
  <div class="col-12">
      <h4>Nuevo Requerimiento</h4>
  </div>
  <div class="col-12 card shadow mt-4">
      <div class="card-header pb-0" style="background-color: #fff;">
         <div class="row">
           
            <div class="bg-tp col-3 text-light p-2" style="border-top-right-radius: 1em;" >
              Informaci&oacute;n del requerimiento
            </div>

            <div class="offset-5 col-1" *ngIf="rol==='ROLE_AUTORIZACION'">
                <button class="btn radiu-tp btn-outline-tp tm" (click)="rechaza()">Rechazar</button>
            </div>

            <div class="offset-5 col-1" *ngIf="rol!=='ROLE_AUTORIZACION'">
              <button class="btn radiu-tp btn-outline-tp tm" (click)="guardar()">Guardar</button>
            </div>

            <div class="offset-1 col-1" *ngIf="rol=='ROLE_COMERCIAL'">
                <button class="btn radiu-tp btn-tp tm" (click)="confirmarEnvio()">Enviar a Autorizar</button>
            </div>

            <div class="offset-1 col-2" *ngIf="rol=='ROLE_OPERACIONES'">
              <button class="btn radiu-tp btn-tp tm" (click)="confirmarEnvio()">Enviar a Aprobaci√≥n</button>
          </div>

          <div class="offset-1 col-2" *ngIf="rol=='ROLE_AUTORIZACION'">
            <button class="btn radiu-tp btn-tp tm" (click)="confirmarAutorizacion()">Autorizar</button>
          </div>

            <div class="offset-1 col-2" *ngIf="tipoAccion=='Reactivar'">
                <button class="btn radiu-tp btn-tp tm" (click)="reactivar()">Reactivar</button>
            </div>
            
         </div>
      </div>
      <div class="card-body">
        <!-- Componente requerimiento -->
        <app-dtos-requerimiento></app-dtos-requerimiento>
        <!-- Fin componente requerimiento -->
        <div class="col-12">
          <h6 class="text-gris">Informacion Adicional</h6>
        </div>
        <blockquote class="blockquote col-12 p-4 m-2 bg-gris">
          <form autocomplete="off" class="row" [formGroup]="requerimientoForm" action="guardar()">
            <div class="row">
                <div class="mb-3 col-3 form-control-sm" *ngIf="permisoEditar">
                    <label for="exampleInputEmail1" class="form-label">Folio de Factura</label>
                    <mat-icon matTooltip="texto">
                      help_outline
                     </mat-icon>
                    <input type="text" class="form-control" formControlName="folio" >
                </div>
                <div class="mb-3 col-3 form-control-sm" *ngIf="!permisoEditar">
                    <label for="exampleInputEmail1" class="form-label">Folio de Factura</label>
                    <mat-icon matTooltip="texto">
                      help_outline
                     </mat-icon>
                    <input type="text" class="form-control" value="{{requerimientoForm.value.folio}}" disabled="true">
                </div>
                <div class="mb-3 col-3 form-control-sm" *ngIf="permisoEditar">
                    <label for="exampleInputEmail1" class="form-label">Importe</label>
                    <mat-icon matTooltip="texto">
                      help_outline
                     </mat-icon>
                    <input type="text" class="form-control" formControlName="importe">
                </div>
                <div class="mb-3 col-3 form-control-sm" *ngIf="!permisoEditar">
                    <label for="exampleInputEmail1" class="form-label">Importe</label>
                    <mat-icon matTooltip="texto">
                      help_outline
                     </mat-icon>
                    <input type="text" class="form-control" value="{{requerimientoForm.value.importe}}" disabled="true">
                </div>
                <div class="mb-3 col-3 form-control-sm" *ngIf="permisoEditar">
                    <label for="exampleInputEmail1" class="form-label">Fecha de pago</label>
                    <mat-icon matTooltip="texto">
                      help_outline
                     </mat-icon>
                    <input type="date" class="form-control" formControlName="paydate">
                </div>
                <div class="mb-3 col-3 form-control-sm" *ngIf="!permisoEditar">
                    <label for="exampleInputEmail1" class="form-label">Fecha de pago</label>
                    <mat-icon matTooltip="texto">
                      help_outline
                     </mat-icon>
                    <input type="date" class="form-control" value="{{requerimientoForm.value.paydate}}" disabled="true">
                </div>
                <div class="mb-3 col-3 form-control-sm" *ngIf="permisoEditar">
                  <label for="exampleInputEmail1" class="form-label">Registro contable</label>
                  <mat-icon matTooltip="texto">
                    help_outline
                   </mat-icon>
                  <input type="text" class="form-control" formControlName="registroContable">
                </div>
                
                <div class="mb-3 col-3 form-control-sm" *ngIf="!permisoEditar">
                  <label for="exampleInputEmail1" class="form-label">Registro contable</label>
                  <mat-icon matTooltip="texto">
                    help_outline
                   </mat-icon>
                  <input type="text" class="form-control" value="{{requerimientoForm.value.registroContable}}" disabled="true">
                </div>
            </div>
            <div class="row">
                <div class="mb-3 col-3 form-control-sm" *ngIf="permisoEditar">
                    <label for="exampleInputEmail1" class="form-label">Nombre de contacto</label>
                    <mat-icon matTooltip="texto">
                      help_outline
                     </mat-icon>
                    <input type="text" class="form-control" formControlName="nombreContacto">
                </div>
                <div class="mb-3 col-3 form-control-sm" *ngIf="!permisoEditar">
                    <label for="exampleInputEmail1" class="form-label">Nombre de contacto</label>
                    <mat-icon matTooltip="texto">
                      help_outline
                     </mat-icon>
                    <input type="text" class="form-control" value="{{requerimientoForm.value.nombreContacto}}" disabled="true">
                </div>
                <div class="mb-3 col-3 form-control-sm" *ngIf="permisoEditar">
                    <label for="exampleInputEmail1" class="form-label">Nombre de proveedor/tramitado</label>
                    <mat-icon matTooltip="texto">
                      help_outline
                     </mat-icon>
                    <input type="text" class="form-control" formControlName="proveedor">
                </div>
                <div class="mb-3 col-3 form-control-sm" *ngIf="!permisoEditar">
                    <label for="exampleInputEmail1" class="form-label">Nombre de proveedor/tramitado</label>
                    <mat-icon matTooltip="texto">
                      help_outline
                     </mat-icon>
                    <input type="text" class="form-control" value="{{requerimientoForm.value.proveedor}}" disabled="true">
                </div>
                <div class="mb-3 col-3 form-control-sm" *ngIf="permisoEditar">
                    <label for="exampleInputEmail1" class="form-label">Sistema</label>
                    <mat-icon matTooltip="texto">
                      help_outline
                     </mat-icon>
                    <select id="inputState" class="form-select" formControlName="sistema">
                      <option selected></option>
                      <option *ngFor="let item of area;"  value="{{item.id}}">{{item.descripcion}}</option>
                    </select>
                </div>
                <div class="mb-3 col-3 form-control-sm" *ngIf="!permisoEditar">
                    <label for="exampleInputEmail1" class="form-label">Sistema</label>
                    <mat-icon matTooltip="texto">
                      help_outline
                     </mat-icon>
                    <select id="inputState" class="form-select" value="{{requerimientoForm.value.sistema}}" disabled="true">
                      <option selected></option>
                      <option *ngFor="let item of area;"  value="{{item.id}}">{{item.descripcion}}</option>
                    </select>
                </div>
                <div class="mb-3 col-3 form-control-sm" *ngIf="permisoEditar">
                    <label for="exampleInputEmail1" class="form-label">Tipo de Solicitud</label>
                    <mat-icon matTooltip="texto">
                      help_outline
                     </mat-icon>
                    <select id="inputState" class="form-select" formControlName="tipoSolicitud">
                      <option selected></option>
                      <option *ngFor="let item of tipoSolicitud;"  value="{{item.id}}">{{item.descripcion}}</option>
                    </select>
                </div>
                <div class="mb-3 col-3 form-control-sm" *ngIf="!permisoEditar">
                    <label for="exampleInputEmail1" class="form-label">Tipo de Solicitud</label>
                    <mat-icon matTooltip="texto">
                      help_outline
                     </mat-icon>
                    <select id="inputState" class="form-select"  value="{{requerimientoForm.value.tipoSolicitud}}" disabled="true">
                      <option *ngFor="let item of tipoSolicitud;"  value="{{item.id}}">{{item.descripcion}}</option>
                    </select>
                </div>
            </div>
            <div class="row">
                <div class="mb-3 col-3 form-control-sm" *ngIf="permisoEditar">
                    <label for="exampleInputEmail1" class="form-label">Folio egreso</label>
                    <mat-icon matTooltip="texto">
                      help_outline
                     </mat-icon>
                    <input type="text" class="form-control" formControlName="folioEgreso">
                </div>
                <div class="mb-3 col-3 form-control-sm" *ngIf="!permisoEditar">
                    <label for="exampleInputEmail1" class="form-label">Folio egreso</label>
                    <mat-icon matTooltip="texto">
                      help_outline
                     </mat-icon>
                    <input type="text" class="form-control" value="{{requerimientoForm.value.folioEgreso}}" disabled="true">
                </div>
                <div class="mb-3 col-3 form-control-sm" *ngIf="permisoEditar">
                    <label for="exampleInputEmail1" class="form-label">&Aacute;rea</label>
                    <mat-icon matTooltip="texto">
                      help_outline
                     </mat-icon>
                    <select id="inputState" class="form-select" formControlName="area">
                      <option selected disabled></option>
                      <option *ngFor="let item of area;"  value="{{item.id}}">{{item.descripcion}}</option>
                    </select>
                </div>
                <div class="mb-3 col-3 form-control-sm" *ngIf="!permisoEditar">
                    <label for="exampleInputEmail1" class="form-label">&Aacute;rea</label>
                    <mat-icon matTooltip="texto">
                      help_outline
                     </mat-icon>
                    <select id="inputState" class="form-select" value="{{requerimientoForm.value.area}}" disabled="true">
                      <option selected disabled></option>
                      <option *ngFor="let item of area;"  value="{{item.id}}">{{item.descripcion}}</option>
                    </select>
                </div>
                <div class="mb-3 col-3 form-control-sm" *ngIf="permisoEditar">
                  <label for="exampleInputEmail1" class="form-label">CC</label>
                  <mat-icon matTooltip="texto">
                    help_outline
                   </mat-icon>
                  <input type="text" class="form-control" formControlName="cc">
              </div>
              <div class="mb-3 col-3 form-control-sm" *ngIf="!permisoEditar">
                  <label for="exampleInputEmail1" class="form-label">CC</label>
                  <mat-icon matTooltip="texto">
                    help_outline
                   </mat-icon>
                  <input type="text" class="form-control" value="{{requerimientoForm.value.cc}}" disabled="true">
              </div>
              <div class="mb-3 col-3 form-control-sm" *ngIf="permisoEditar">
                <label for="exampleInputEmail1" class="form-label">Nombre CC</label>
                <mat-icon matTooltip="texto">
                  help_outline
                 </mat-icon>
                <input type="text" class="form-control" formControlName="nombreCc">
              </div>
              <div class="mb-3 col-3 form-control-sm" *ngIf="!permisoEditar">
                <label for="exampleInputEmail1" class="form-label">Nombre CC</label>
                <mat-icon matTooltip="texto">
                  help_outline
                 </mat-icon>
                <input type="text" class="form-control" value="{{requerimientoForm.value.nombreCc}}" disabled="true">
              </div>
            </div>
            <div class="row">
                <div class="mb-3 col-3 form-control-sm" *ngIf="permisoEditar">
                    <label for="exampleInputEmail1" class="form-label">Posfin</label>
                    <mat-icon matTooltip="texto">
                      help_outline
                     </mat-icon>
                    <input type="text" class="form-control" formControlName="postFin">
                </div>
                <div class="mb-3 col-3 form-control-sm" *ngIf="!permisoEditar">
                    <label for="exampleInputEmail1" class="form-label">Posfin</label>
                    <mat-icon matTooltip="texto">
                      help_outline
                     </mat-icon>
                    <input type="text" class="form-control" value="{{requerimientoForm.value.postFin}}" disabled="true">
                </div>
                <div class="mb-3 col-3 form-control-sm" *ngIf="permisoEditar">
                    <label for="exampleInputEmail1" class="form-label">Incluido en permiso</label>
                    <mat-icon matTooltip="texto">
                      help_outline
                     </mat-icon>
                    <input type="text" class="form-control" formControlName="incluidoPermiso">
                </div>
                <div class="mb-3 col-3 form-control-sm" *ngIf="!permisoEditar">
                    <label for="exampleInputEmail1" class="form-label">Incluido en permiso</label>
                    <mat-icon matTooltip="texto">
                      help_outline
                     </mat-icon>
                    <input type="text" class="form-control" value="{{requerimientoForm.value.incluidoPermiso}}" disabled="true">
                </div>
                <div class="mb-3 col-3 form-control-sm" *ngIf="permisoEditar">
                  <label for="exampleInputEmail1" class="form-label">Horario de permiso</label>
                  <mat-icon matTooltip="texto">
                    help_outline
                   </mat-icon>
                  <div class="grid2">
                    <select id="inputState" class="form-select grid-col-6" formControlName="horario">
                      <option selected>Seleccionar</option>
                      <option *ngFor="let item of horario" value="{{item}}">{{item}}</option>:
                    </select>
                    <!--<select id="inputState" class="form-select grid-col-6" >
                      <option selected>Seleccionar</option>
                      <option *ngFor="let item of horario" value="{{item}}">{{item}}</option>
                    </select>-->
                  </div>
              </div>
              <div class="mb-3 col-3 form-control-sm" *ngIf="!permisoEditar">
                  <label for="exampleInputEmail1" class="form-label">Horario de permiso</label>
                  <mat-icon matTooltip="texto">
                    help_outline
                   </mat-icon>
                  <div class="grid2">
                    <select id="inputState" class="form-select grid-col-6" value="{{requerimientoForm.value.horario}}" disabled="true">
                      <option selected>Seleccionar</option>   
                      <option *ngFor="let item of horario" value="{{item}}">{{item}}</option>:
                    </select>
                  </div>
              </div>
              <div class="mb-3 col-3 form-control-sm" *ngIf="permisoEditar">
                <label for="exampleInputEmail1" class="form-label">Permiso/Negociaci&oacute;n</label>
                <mat-icon matTooltip="texto">
                  help_outline
                 </mat-icon>
                <input type="text" class="form-control" formControlName="perNeg">
              </div>
              <div class="mb-3 col-3 form-control-sm" *ngIf="!permisoEditar">
                <label for="exampleInputEmail1" class="form-label">Permiso/Negociaci&oacute;n</label>
                <mat-icon matTooltip="texto">
                  help_outline
                 </mat-icon>
                <input type="text" class="form-control" value="{{requerimientoForm.value.perNeg}}" disabled="true">
              </div>
            </div>
            <div class="row">
              <div class="mb-3 col-3 form-control-sm" *ngIf="permisoEditar">
                  <label for="exampleInputEmail1" class="form-label">Cantidad de permisos</label>
                  <mat-icon matTooltip="texto">
                    help_outline
                   </mat-icon>
                  <input type="text" class="form-control" formControlName="catidad">
              </div>
              <div class="mb-3 col-3 form-control-sm" *ngIf="!permisoEditar">
                  <label for="exampleInputEmail1" class="form-label">Cantidad de permisos</label>
                  <mat-icon matTooltip="texto">
                    help_outline
                   </mat-icon>
                  <input type="text" class="form-control" value="{{requerimientoForm.value.catidad}}" disabled="true">
              </div>
              <div class="mb-3 col-3 form-control-sm" *ngIf="permisoEditar">
                  <label for="exampleInputEmail1" class="form-label">Vigencia</label>
                  <mat-icon matTooltip="texto">
                    help_outline
                   </mat-icon>
                  <div class="grid2">
                    <input type="number" formControlName="vigencia">
                    <select id="inputState" class="form-select grid-col-6" formControlName="medida">
                      <option selected>Seleccionar</option>
                      <option *ngFor="let item of unidad" value="{{item.id}}">{{item.descripcion}}</option>
                    </select>
                  </div>
              </div>
              <div class="mb-3 col-3 form-control-sm" *ngIf="!permisoEditar">
                  <label for="exampleInputEmail1" class="form-label">Vigencia</label>
                  <mat-icon matTooltip="texto">
                    help_outline
                   </mat-icon>
                  <div class="grid2">
                    <input type="number" value="{{requerimientoForm.value.vigencia}}" disabled="true">
                    <select id="inputState" class="form-select grid-col-6" value="{{requerimientoForm.value.medida}}" disabled="true">
                      <option selected>Seleccionar</option>
                      <option *ngFor="let item of unidad" value="{{item.id}}">{{item.descripcion}}</option>
                    </select>
                  </div>
              </div>
              <div class="mb-3 col-3 form-control-sm" *ngIf="permisoEditar">
                <label for="exampleInputEmail1" class="form-label">Forma de pago</label>
                <mat-icon matTooltip="texto">
                  help_outline
                 </mat-icon>
                <input type="text" class="form-control" formControlName="formaPago">
            </div>
            <div class="mb-3 col-3 form-control-sm" *ngIf="!permisoEditar">
                <label for="exampleInputEmail1" class="form-label">Forma de pago</label>
                <mat-icon matTooltip="texto">
                  help_outline
                 </mat-icon>
                <input type="text" class="form-control" value="{{requerimientoForm.value.formaPago}}" disabled="true">
            </div>
            <div class="mb-3 col-3 form-control-sm" *ngIf="permisoEditar">
              <label for="exampleInputEmail1" class="form-label">Cobertura</label>
              <mat-icon matTooltip="texto">
                help_outline
               </mat-icon>
              <select id="inputState" class="form-select" formControlName="cobertura">
                <option selected></option>
                <option *ngFor="let item of cobertura;"  value="{{item.id}}">{{item.descripcion}}</option>
              </select>
            </div>
            <div class="mb-3 col-3 form-control-sm" *ngIf="!permisoEditar">
              <label for="exampleInputEmail1" class="form-label">Cobertura</label>
              <mat-icon matTooltip="texto">
                help_outline
               </mat-icon>
              <select id="inputState" class="form-select" value="{{requerimientoForm.value.cobertura}}" disabled="true">
                <option selected></option>
                <option *ngFor="let item of cobertura;"  value="{{item.id}}">{{item.descripcion}}</option>
              </select>
            </div>
          </div>
        </form>
        </blockquote>
        <div class="col-12">
          <h6 class="text-gris">Actividades</h6>
        </div>
        <blockquote class="blockquote col-12 p-4 m-2 bg-gris">
          <form autocomplete="off" class="row" [formGroup]="actividadesForm" action="addActividad()">
            <div class="row">
              <div class="col-6 form-control-sm">
                <label for="exampleInputEmail1" class="form-label">Tipo de actividad</label>
                <mat-icon matTooltip="texto">
                  help_outline
                 </mat-icon>
                <div class="row">
                  <div class="mb-3 col-6 form-control-sm" *ngIf="permisoEditar">
                    <select id="inputState" class="form-select" formControlName="actividad">
                      <option selected>Selecciona</option>
                      <option *ngFor="let item of actividades;"  value="{{item.id}}">{{item.descripcion}}</option>
                    </select>
                  </div>
                  <div class="mb-3 col-6 form-control-sm" *ngIf="!permisoEditar">
                    <select id="inputState" class="form-select" value="{{actividadesForm.value.actividad}}" disabled="true">
                      <option selected>Selecciona</option>
                      <option *ngFor="let item of area;"  value="{{item.id}}">{{item.descripcion}}</option>
                    </select>
                  </div>
                  <div class="col-6 form-control-sm" *ngIf="permisoEditar" style="display: none;">
                    <button class="btn radiu-tp btn-tp col-6 " style="display: none;">Enviar a aprobaci&oacute;n</button>
                  </div>
                  <div class="col-6 form-control-sm" *ngIf="!permisoEditar" style="display: none;">
                    <button class="btn radiu-tp btn-tp col-6 " disabled="true">Enviar a aprobaci&oacute;n</button>
                  </div>
                </div>
              </div>
              <div class="mb-3 col-6 form-control-sm" *ngIf="permisoEditar">
                <label for="exampleInputEmail1" class="form-label">Descripci&oacute;n de actividades</label>
                <mat-icon matTooltip="texto">
                  help_outline
                 </mat-icon>
                <input type="text" class="form-control mt-5" formControlName="descripcion" id="descripcion" value="">
              </div>
              <div class="mb-3 col-6 form-control-sm" *ngIf="!permisoEditar">
                <label for="exampleInputEmail1" class="form-label">Descripci&oacute;n de actividades</label>
                <mat-icon matTooltip="texto">
                  help_outline
                 </mat-icon>
                <input type="text" class="form-control mt-5" value="{{actividadesForm.value.descripcion}}" disabled="true">
              </div>
              <div class="row">
                <div class="col-6 form-control-sm">
                  <label for="exampleInputEmail1" class="form-label">Otras actividades</label>
                  <mat-icon matTooltip="texto">
                    help_outline
                   </mat-icon>
                  <div class="row">
                    <div class="mb-3 col-6 form-control-sm" *ngIf="permisoEditar">
                      <input type="text" class="form-control" id="actividad">
                    </div>
                    <div class="mb-3 col-6 form-control-sm" *ngIf="!permisoEditar">
                      <input type="text" class="form-control"  disabled="true">
                    </div>
                    <div class="col-6 form-control-sm" *ngIf="permisoEditar">
                      <button class="btn radiu-tp btn-tp col-6 " (click)="addActividad()">Agregar</button>
                    </div>
                    <div class="col-6 form-control-sm" *ngIf="!permisoEditar">
                      <button class="btn radiu-tp btn-tp col-6 " disabled="true">Agregar</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </form>
        </blockquote>
        <div class="col-12">
          <h6 class="text-gris">Observaciones</h6>
        </div>
        <blockquote class="blockquote col-12 p-4 m-2 bg-gris">
          <div class="mt-5 row" >
            <table class="table table-striped table-hover" >
              <thead>
                <th class="form-control-sm">Usuario:</th>
                <th class="form-control-sm">Comentario:</th>
              </thead>
              <tbody>
                <tr *ngFor="let item of comentarios">
                  <td class="form-control-sm">{{item.usuario}}</td>
                  <td class="form-control-sm">{{item.comentario}}</td>
                </tr>
              </tbody>
            </table>
          </div> 
      </blockquote >
      <div class="col-12" *ngIf="rol==='ROLE_AUTORIZACION'">
        <h6 class="text-gris">Folios</h6>
      </div>
      <blockquote class="blockquote col-12 p-4 m-2 bg-gris"  >
        <div class="row">
          <div class="mb-3 col-3 form-control-sm">
              <label for="text" class="form-label">Folio SAP</label>
              <mat-icon matTooltip="texto">
                help_outline
               </mat-icon>
              <input type="text" class="form-control" formControlName="folioSat">
          </div>
          <div class="mb-3 col-3 form-control-sm">
            <label for="text" class="form-label">Folio de Seguimiento</label>
            <mat-icon matTooltip="texto">
              help_outline
             </mat-icon>
            <input type="text" class="form-control" formControlName="folioCap">
        </div>
        </div>
      </blockquote>
      <div class="col-12">
          <h6 class="text-gris">Documentos</h6>
        </div>
        <blockquote class="blockquote col-12 p-4 m-2 bg-gris">
          <div class="mt-5 row" >
            <ul>
                <li *ngFor="let file of fileInfos | async">

                  <div class="row">
                    <div class="mb-3 col-3 form-control-sm">
                        <label for="text" class="form-label">{{file.name}}</label>
                    </div>
                    <div class="mb-3 col-3 form-control-sm">
                      <span data-toggle="tooltip" style="cursor: pointer;" title="Ver documento" (click)="selectFile(file.url,file.name)"><img src="../../../../assets/iconos/icono_mostrar.png"></span> 
                    </div>
                  </div>                    
                </li>
            </ul>
          </div> 
      </blockquote>

  </div>

</div>
